{"remainingRequest":"/Users/oluwatobiadeoye/Desktop/coachVueApp/node_modules/babel-loader/lib/index.js!/Users/oluwatobiadeoye/Desktop/coachVueApp/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/oluwatobiadeoye/Desktop/coachVueApp/src/store/modules/requests/actions.js","dependencies":[{"path":"/Users/oluwatobiadeoye/Desktop/coachVueApp/src/store/modules/requests/actions.js","mtime":1604191949839},{"path":"/Users/oluwatobiadeoye/Desktop/coachVueApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/oluwatobiadeoye/Desktop/coachVueApp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/oluwatobiadeoye/Desktop/coachVueApp/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvb2x1d2F0b2JpYWRlb3llL0Rlc2t0b3AvY29hY2hWdWVBcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29udGFjdENvYWNoOiBmdW5jdGlvbiBjb250YWN0Q29hY2goY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIG5ld1JlcXVlc3QsIHJlc3BvbnNlLCByZXNwb25zZURhdGEsIGVycm9yOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbmV3UmVxdWVzdCA9IHsKICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHBheWxvYWQubWVzc2FnZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJodHRwczovL3Z1ZS1odHRwLWRlbW8tODVlOWUuZmlyZWJhc2Vpby5jb20vcmVxdWVzdHMvIi5jb25jYXQocGF5bG9hZC5jb2FjaElkLCAiLmpzb24iKSwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdSZXF1ZXN0KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSB8fCAiRmFpbGVkIHRvIHNlbmQgcmVxdWVzdC4iKTsKICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgbmV3UmVxdWVzdC5pZCA9IHJlc3BvbnNlRGF0YS5uYW1lOwogICAgICAgICAgICAgIG5ld1JlcXVlc3QuY29hY2hJZCA9IHBheWxvYWQuY29hY2hJZDsKICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiYWRkUmVxdWVzdCIsIG5ld1JlcXVlc3QpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGZldGNoUmVxdWVzdHM6IGZ1bmN0aW9uIGZldGNoUmVxdWVzdHMoY29udGV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb2FjaElkLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhLCBlcnJvciwgcmVxdWVzdHMsIGtleSwgcmVxdWVzdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb2FjaElkID0gY29udGV4dC5yb290R2V0dGVycy51c2VySWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiaHR0cHM6Ly92dWUtaHR0cC1kZW1vLTg1ZTllLmZpcmViYXNlaW8uY29tL3JlcXVlc3RzLyIuY29uY2F0KGNvYWNoSWQsICIuanNvbiIpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlRGF0YS5tZXNzYWdlIHx8ICJGYWlsZWQgdG8gZmV0Y2ggcmVxdWVzdHMuIik7CiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJlcXVlc3RzID0gW107CgogICAgICAgICAgICAgIGZvciAoa2V5IGluIHJlc3BvbnNlRGF0YSkgewogICAgICAgICAgICAgICAgcmVxdWVzdCA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IGtleSwKICAgICAgICAgICAgICAgICAgY29hY2hJZDogY29hY2hJZCwKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiByZXNwb25zZURhdGFba2V5XS51c2VyRW1haWwsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YVtrZXldLm1lc3NhZ2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wdXNoKHJlcXVlc3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInNldFJlcXVlc3RzIiwgcmVxdWVzdHMpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/oluwatobiadeoye/Desktop/coachVueApp/src/store/modules/requests/actions.js"],"names":["contactCoach","context","payload","newRequest","userEmail","email","message","fetch","coachId","method","body","JSON","stringify","response","json","responseData","ok","error","Error","id","name","commit","fetchRequests","rootGetters","userId","requests","key","request","push"],"mappings":";;;;AAAA,eAAe;AACPA,EAAAA,YADO,wBACMC,OADN,EACeC,OADf,EACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC7BC,cAAAA,UAD6B,GAChB;AACjBC,gBAAAA,SAAS,EAAEF,OAAO,CAACG,KADF;AAEjBC,gBAAAA,OAAO,EAAEJ,OAAO,CAACI;AAFA,eADgB;AAAA;AAAA,qBAKZC,KAAK,+DAC6BL,OAAO,CAACM,OADrC,YAE1B;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,UAAf;AAFR,eAF0B,CALO;;AAAA;AAK7BU,cAAAA,QAL6B;AAAA;AAAA,qBAaRA,QAAQ,CAACC,IAAT,EAbQ;;AAAA;AAa7BC,cAAAA,YAb6B;;AAAA,kBAe9BF,QAAQ,CAACG,EAfqB;AAAA;AAAA;AAAA;;AAgB3BC,cAAAA,KAhB2B,GAgBnB,IAAIC,KAAJ,CACZH,YAAY,CAACT,OAAb,IAAwB,yBADZ,CAhBmB;AAAA,oBAmB3BW,KAnB2B;;AAAA;AAsBnCd,cAAAA,UAAU,CAACgB,EAAX,GAAgBJ,YAAY,CAACK,IAA7B;AACAjB,cAAAA,UAAU,CAACK,OAAX,GAAqBN,OAAO,CAACM,OAA7B;AAEAP,cAAAA,OAAO,CAACoB,MAAR,CAAe,YAAf,EAA6BlB,UAA7B;;AAzBmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BpC,GA3BY;AA4BPmB,EAAAA,aA5BO,yBA4BOrB,OA5BP,EA4BgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBO,cAAAA,OADqB,GACXP,OAAO,CAACsB,WAAR,CAAoBC,MADT;AAAA;AAAA,qBAEJjB,KAAK,+DAC6BC,OAD7B,WAFD;;AAAA;AAErBK,cAAAA,QAFqB;AAAA;AAAA,qBAKAA,QAAQ,CAACC,IAAT,EALA;;AAAA;AAKrBC,cAAAA,YALqB;;AAAA,kBAOtBF,QAAQ,CAACG,EAPa;AAAA;AAAA;AAAA;;AAQnBC,cAAAA,KARmB,GAQX,IAAIC,KAAJ,CACZH,YAAY,CAACT,OAAb,IAAwB,2BADZ,CARW;AAAA,oBAWnBW,KAXmB;;AAAA;AAcrBQ,cAAAA,QAdqB,GAcV,EAdU;;AAgB3B,mBAAWC,GAAX,IAAkBX,YAAlB,EAAgC;AACxBY,gBAAAA,OADwB,GACd;AACdR,kBAAAA,EAAE,EAAEO,GADU;AAEdlB,kBAAAA,OAAO,EAAEA,OAFK;AAGdJ,kBAAAA,SAAS,EAAEW,YAAY,CAACW,GAAD,CAAZ,CAAkBtB,SAHf;AAIdE,kBAAAA,OAAO,EAAES,YAAY,CAACW,GAAD,CAAZ,CAAkBpB;AAJb,iBADc;AAO9BmB,gBAAAA,QAAQ,CAACG,IAAT,CAAcD,OAAd;AACD;;AAED1B,cAAAA,OAAO,CAACoB,MAAR,CAAe,aAAf,EAA8BI,QAA9B;;AA1B2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2B5B;AAvDY,CAAf","sourcesContent":["export default {\n  async contactCoach(context, payload) {\n    const newRequest = {\n      userEmail: payload.email,\n      message: payload.message\n    };\n    const response = await fetch(\n      `https://vue-http-demo-85e9e.firebaseio.com/requests/${payload.coachId}.json`,\n      {\n        method: \"POST\",\n        body: JSON.stringify(newRequest)\n      }\n    );\n\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const error = new Error(\n        responseData.message || \"Failed to send request.\"\n      );\n      throw error;\n    }\n\n    newRequest.id = responseData.name;\n    newRequest.coachId = payload.coachId;\n\n    context.commit(\"addRequest\", newRequest);\n  },\n  async fetchRequests(context) {\n    const coachId = context.rootGetters.userId;\n    const response = await fetch(\n      `https://vue-http-demo-85e9e.firebaseio.com/requests/${coachId}.json`\n    );\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const error = new Error(\n        responseData.message || \"Failed to fetch requests.\"\n      );\n      throw error;\n    }\n\n    const requests = [];\n\n    for (const key in responseData) {\n      const request = {\n        id: key,\n        coachId: coachId,\n        userEmail: responseData[key].userEmail,\n        message: responseData[key].message\n      };\n      requests.push(request);\n    }\n\n    context.commit(\"setRequests\", requests);\n  }\n};\n"]}]}